rule all:
	input:
		"workflows/workflow_June_10_2019.svg"

rule addMetaData:
	input:
		"example.json"
	output:
		"tempOutput.json"
	shell:
		"python3 -c 'import metaDataMiner as mdm; mdm.processFile(\"{input}\",\"{output}\",False)'"

rule filterBenign:
	input:
		"tempOutput.json"
	output:
		"test.json"
	shell:
		"python3 -c 'import dataFilter as df; df.filterBenign(\"{input}\",\"{output}\")'"


rule makeReport:
	input:
		original="example.json",
		results="test.json"
	output:
		"test.html"
	shell:
		"python3 -c 'import report as rp; rp.createReport(\"{input.original}\",\"{input.results}\",\"{output}\")'"

rule makeWorkflow:
	input:
		"test.html",
	output:
		"workflows/workflow_June_10_2019.svg"
	shell: "snakemake --dag -s Snakefile | dot -Tsvg > workflows/workflow_June_10_2019.svg | echo 'BenignDbApp is finished. Checkout the workflow directory for an overview of the runned workflow. The error below is safe and will not have inpact on the results.'"